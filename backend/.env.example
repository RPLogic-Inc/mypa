# ═══════════════════════════════════════════════════════════════════════════
# MyPA Backend Configuration
# ═══════════════════════════════════════════════════════════════════════════

# Server
PORT=3001
NODE_ENV=development
APP_URL=http://localhost:5173

# ═══════════════════════════════════════════════════════════════════════════
# Database
# ═══════════════════════════════════════════════════════════════════════════
DATABASE_URL=file:./mypa.db

# ═══════════════════════════════════════════════════════════════════════════
# Authentication (JWT)
# ═══════════════════════════════════════════════════════════════════════════
# IMPORTANT: Change this in production!
JWT_SECRET=your-secure-jwt-secret-change-in-production

# ═══════════════════════════════════════════════════════════════════════════
# AI Services
# ═══════════════════════════════════════════════════════════════════════════

# OpenAI API Key (for Whisper transcription)
OPENAI_API_KEY=sk-...

# OpenClaw Gateway Authentication
# SECURITY CRITICAL: Never store this token in the database!
# This token should ONLY exist in server environment variables or secret managers.
# Users authenticate to OpenClaw proxy via their JWT tokens.
# The server uses this token to authenticate with the OpenClaw Gateway on their behalf.
# Endpoint: POST /api/openclaw/chat/completions (requires JWT Bearer token)
OPENCLAW_URL=http://localhost:18789
OPENCLAW_TOKEN=your-gateway-token

# OpenClaw Integration Mode
# - "disabled": No OpenClaw calls (pure data mode)
# - "optional": Skip agent creation if token not set (default, recommended)
# - "legacy": Backend creates agents (deprecated, will be removed)
OPENCLAW_INTEGRATION_MODE=optional

# ═══════════════════════════════════════════════════════════════════════════
# Logging
# ═══════════════════════════════════════════════════════════════════════════
# Log level: debug, info, warn, error
LOG_LEVEL=info

# Enable file logging (auto-enabled in production)
LOG_TO_FILE=false

# Log directory (default: ./logs)
# LOG_DIR=./logs

# Max log file size in MB before rotation
LOG_MAX_SIZE_MB=10

# Max number of log files to retain
LOG_MAX_FILES=30

# Enable console output (set to false in production if using PM2)
LOG_CONSOLE=true

# ═══════════════════════════════════════════════════════════════════════════
# Error Tracking
# ═══════════════════════════════════════════════════════════════════════════

# Sentry DSN (optional - for production error tracking)
# SENTRY_DSN=https://xxx@sentry.io/xxx

# Error webhook URL (e.g., Slack incoming webhook)
# ERROR_WEBHOOK_URL=https://hooks.slack.com/services/xxx

# Minimum severity to send to webhook: fatal, error, warning, info
ERROR_WEBHOOK_MIN_SEVERITY=error

# Application version (for error tracking)
# APP_VERSION=1.0.0

# ═══════════════════════════════════════════════════════════════════════════
# External Integrations
# ═══════════════════════════════════════════════════════════════════════════

# ClickUp Integration (for complex task management)
# Get these from: https://app.clickup.com/settings/apps
CLICKUP_CLIENT_ID=your-clickup-client-id
CLICKUP_CLIENT_SECRET=your-clickup-client-secret
# Redirect URI registered with ClickUp (auto-derived from BACKEND_URL if not set)
# CLICKUP_REDIRECT_URI=http://localhost:3001/api/clickup/callback
# Where to send the user after ClickUp OAuth completes (auto-derived from FRONTEND_URL if not set)
# CLICKUP_REDIRECT_URL=http://localhost:5173

# Webhook signature secrets (for validating incoming webhooks)
# EMAIL_WEBHOOK_SECRET=your-email-webhook-secret
# CALENDAR_WEBHOOK_SECRET=your-calendar-webhook-secret

# ntfy.sh (Push Notifications)
# NTFY_SERVER=https://ntfy.sh

# Twenty CRM
# TWENTY_API_URL=http://localhost:3000
# TWENTY_API_KEY=your_twenty_api_key

# PA Workspace (Google Workspace execution bridge)
# Used by /api/crm/workflows/coordinate when googleWorkspace.enabled=true
# PA_WORKSPACE_API_URL=http://localhost:3003
# Optional service token for backend -> pa-workspace calls
# PA_WORKSPACE_SERVICE_TOKEN=replace-with-app-service-token

# ═══════════════════════════════════════════════════════════════════════════
# Production Settings
# ═══════════════════════════════════════════════════════════════════════════

# PM2 instances (default: max = all CPU cores)
# PM2_INSTANCES=max

# Server hostname (for error tracking)
# HOSTNAME=mypa-prod-1
